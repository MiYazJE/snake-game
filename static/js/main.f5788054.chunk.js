(this["webpackJsonpsnake-game"]=this["webpackJsonpsnake-game"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(8),s=n.n(a),o=n(3),u=n(4),i=n(2),j=n(1),b=Object(r.memo)((function(e){var t=e.hasSnake,n=e.hasFruit?"fruit":"",r="cell ".concat(t?"snake":""," ").concat(n);return Object(j.jsx)("div",{className:r})})),l={x:1,y:0},O={a:{x:-1,y:0},w:{x:0,y:-1},s:{x:0,y:1},d:l},d=function(e){var t=Object(r.useState)(!1),n=Object(i.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(l),u=Object(i.a)(s,2),j=u[0],b=u[1];return Object(r.useEffect)((function(){var e=function(e){var t=e.key;Object.keys(O).includes(t)&&(c||a(!0),b(O[t]))};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[e,c]),Object(r.useEffect)((function(){var t;return t=setInterval((function(){c&&e(Object(o.a)({},j))}),100),function(){console.log("clearing interval"),clearInterval(t)}}),[c,j,e]),{stop:function(){return a(!1)}}},f=function(e){var t=e.updateScore,n=e.saveScore,c=Object(r.useMemo)((function(){return 20}),[]),a=Object(r.useMemo)((function(){return 20}),[]),s=Object(r.useMemo)((function(){return{gridTemplateRows:"repeat(".concat(c,", 1fr)"),gridTemplateColumns:"repeat(".concat(a,", 1fr)"),maxWidth:"".concat(25*c,"px")}}),[c,a]),l=Object(r.useState)([{x:parseInt(c/2),y:parseInt(a/2)},{x:parseInt(c/2)-1,y:parseInt(a/2)},{x:parseInt(c/2)-2,y:parseInt(a/2)}]),O=Object(i.a)(l,2),f=O[0],p=O[1],v=Object(r.useState)({x:parseInt(Math.random()*c),y:parseInt(Math.random()*a)}),m=Object(i.a)(v,2),x=m[0],h=m[1],S=Object(r.useState)(Object(u.a)(new Array(a)).map((function(){return Object(u.a)(new Array(a))}))),y=Object(i.a)(S,2),g=y[0],w=y[1],k=Object(r.useState)(!1),I=Object(i.a)(k,2),M=I[0],N=I[1],E=Object(r.useCallback)((function(e,t){return x.x===t&&x.y===e}),[x]),C=Object(r.useCallback)((function(e,t){return f.some((function(n){var r=n.x,c=n.y;return r===t&&c===e}))}),[f]);Object(r.useEffect)((function(){w((function(e){return e.map((function(e,t){return Object(u.a)(e.map((function(e,n){var r=E(t,n),c=C(t,n);return{hasFruit:r,hasSnake:c,isSafe:!r&&!c,id:t*n+n}})))}))}))}),[C,E,x,f]);var J=Object(r.useCallback)((function(e){var n=e.x,r=e.y,s=f[0],i=f[f.length-1],j=s.x+n,b=s.y+r;if(b<0||b===c||j<0||j===a||C(b,j))return console.log("game over"),void N(!0);var l=E(b,j),O={x:j,y:b},d=Object(u.a)(f).map((function(e){var t=Object(o.a)({},O);return O=e,t}));l&&(h(function(e){for(;;){var t=parseInt(Math.random()*e.length),n=parseInt(Math.random()*e[0].length);if(e[n][t].isSafe)return{y:t,x:n}}}(g)),t(10),d.push(Object(o.a)({},i))),p(d)}),[a,c,g,E,C,f,t]),L=d(J).stop;return Object(r.useEffect)((function(){M&&(L(),n())}),[M,L,n]),Object(j.jsx)("div",{className:"board",style:s,children:g.map((function(e){return Object(u.a)(e.map((function(e){return Object(j.jsx)(b,Object(o.a)({},e),null===e||void 0===e?void 0:e.id)})))}))})},p=(n(14),function(){var e=Object(r.useState)(0),t=Object(i.a)(e,2),n=t[0],c=t[1],a=function(){var e;return(null===(e=JSON.parse(window.localStorage.getItem("score")))||void 0===e?void 0:e.score)||0};return{currentScore:n,saveScore:function(){var e=a()||0;n>e&&window.localStorage.setItem("score",JSON.stringify({score:n}))},getMaxScore:a,updateScore:function(e){return c(n+e)}}});var v=function(){var e=p(),t=e.currentScore,n=e.updateScore,r=e.saveScore,c=e.getMaxScore;return Object(j.jsxs)("div",{className:"app",children:[Object(j.jsx)("h1",{children:"Snake Game"}),Object(j.jsx)(f,{updateScore:n,saveScore:r}),Object(j.jsxs)("div",{className:"info",children:[Object(j.jsxs)("div",{className:"score",children:[Object(j.jsxs)("p",{className:"currentPoints",children:[Object(j.jsx)("strong",{children:"Current Score:"})," ",Object(j.jsx)("span",{children:t})]}),Object(j.jsxs)("p",{className:"maxPoints",children:[Object(j.jsx)("strong",{children:"Max Score:"})," ",Object(j.jsx)("span",{children:c()})]})]}),Object(j.jsxs)("div",{className:"controls",children:[Object(j.jsx)("p",{children:"Left: a | Right: d | Bottom: s | Up: w"}),Object(j.jsx)("span",{children:"Press some key to start..."})]})]})]})};s.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(v,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.f5788054.chunk.js.map